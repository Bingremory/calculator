{"version":3,"sources":["components/calculator/btnConfig.js","components/calculator/Calculator.jsx","App.js","index.js"],"names":["BTN_ACTIONS","ADD","THEME","CALC","DELETE","btns","display","action","class","Calculator","btnsRef","useRef","expRef","useState","expression","setExpression","useEffect","Array","from","current","querySelectorAll","forEach","n","style","height","offsetWidth","btnClick","item","expDiv","document","body","classList","toggle","addAnimSpan","oper","parentNode","querySelector","innerHTML","trim","length","remove","cloneNode","appendChild","transform","offsetHeight","res","eval","toString","setTimeout","Math","floor","console","log","content","span","createElement","opacity","width","className","ref","map","index","onClick","App","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.cfd1818b.chunk.js","sourcesContent":["export const BTN_ACTIONS = {\r\n  ADD: \"ADD\",\r\n  THEME: \"THEME\",\r\n  CALC: \"CALC\",\r\n  DELETE: \"DELETE\",\r\n};\r\n\r\nexport const btns = [\r\n  {\r\n    display: \"C\",\r\n    action: BTN_ACTIONS.DELETE,\r\n    class: \"btn__op\",\r\n  },\r\n  {\r\n    display: \"(\",\r\n    action: BTN_ACTIONS.ADD,\r\n    class: \"btn__op\",\r\n  },\r\n  {\r\n    display: \")\",\r\n    action: BTN_ACTIONS.ADD,\r\n    class: \"btn__op\",\r\n  },\r\n  {\r\n    display: \"/\",\r\n    action: BTN_ACTIONS.ADD,\r\n    class: \"btn__op\",\r\n  },\r\n  {\r\n    display: \"7\",\r\n    action: BTN_ACTIONS.ADD,\r\n    class: \"\",\r\n  },\r\n  {\r\n    display: \"8\",\r\n    action: BTN_ACTIONS.ADD,\r\n    class: \"\",\r\n  },\r\n  {\r\n    display: \"9\",\r\n    action: BTN_ACTIONS.ADD,\r\n    class: \"\",\r\n  },\r\n  {\r\n    display: \"x\",\r\n    action: BTN_ACTIONS.ADD,\r\n    class: \"btn__op\",\r\n  },\r\n  {\r\n    display: \"4\",\r\n    action: BTN_ACTIONS.ADD,\r\n    class: \"\",\r\n  },\r\n  {\r\n    display: \"5\",\r\n    action: BTN_ACTIONS.ADD,\r\n    class: \"\",\r\n  },\r\n  {\r\n    display: \"6\",\r\n    action: BTN_ACTIONS.ADD,\r\n    class: \"\",\r\n  },\r\n  {\r\n    display: \"-\",\r\n    action: BTN_ACTIONS.ADD,\r\n    class: \"btn__op\",\r\n  },\r\n  {\r\n    display: \"1\",\r\n    action: BTN_ACTIONS.ADD,\r\n    class: \"\",\r\n  },\r\n  {\r\n    display: \"2\",\r\n    action: BTN_ACTIONS.ADD,\r\n    class: \"\",\r\n  },\r\n  {\r\n    display: \"3\",\r\n    action: BTN_ACTIONS.ADD,\r\n    class: \"\",\r\n  },\r\n  {\r\n    display: \"+\",\r\n    action: BTN_ACTIONS.ADD,\r\n    class: \"btn__op\",\r\n  },\r\n  {\r\n    display: \"☀️\",\r\n    action: BTN_ACTIONS.THEME,\r\n    class: \"\",\r\n  },\r\n  {\r\n    display: \"0\",\r\n    action: BTN_ACTIONS.ADD,\r\n    class: \"\",\r\n  },\r\n  {\r\n    display: \".\",\r\n    action: BTN_ACTIONS.ADD,\r\n    class: \"\",\r\n  },\r\n  {\r\n    display: \"=\",\r\n    action: BTN_ACTIONS.CALC,\r\n    class: \"btn__op\",\r\n  },\r\n];\r\n","import React, { useRef, useEffect, useState } from \"react\";\r\n\r\nimport \"./calculator.css\";\r\n\r\nimport { btns, BTN_ACTIONS } from \"./btnConfig\";\r\n\r\nconst Calculator = () => {\r\n  const btnsRef = useRef(null);\r\n  const expRef = useRef(null);\r\n\r\n  const [expression, setExpression] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const btns = Array.from(btnsRef.current.querySelectorAll(\"button\"));\r\n\r\n    btns.forEach((n) => (n.style.height = n.offsetWidth + \"px\"));\r\n  }, []);\r\n\r\n  const btnClick = (item) => {\r\n    const expDiv = expRef.current;\r\n\r\n    if (item.action === BTN_ACTIONS.THEME) {\r\n      document.body.classList.toggle(\"dark\");\r\n    }\r\n\r\n    if (item.action === BTN_ACTIONS.ADD) {\r\n      addAnimSpan(item.display);\r\n\r\n      const oper = item.display !== \"x\" ? item.display : \"*\";\r\n      setExpression(expression + oper);\r\n    }\r\n\r\n    if (item.action === BTN_ACTIONS.DELETE) {\r\n      expDiv.parentNode.querySelector(\"div:last-child\").innerHTML = \"\";\r\n      expDiv.innerHTML = \"\";\r\n\r\n      setExpression(\"\");\r\n    }\r\n\r\n    if (item.action === BTN_ACTIONS.CALC) {\r\n      if (expression.trim().length <= 0) return;\r\n\r\n      expDiv.parentNode.querySelector(\"div:last-child\").remove();\r\n\r\n      const cloneNode = expDiv.cloneNode(true);\r\n      expDiv.parentNode.appendChild(cloneNode);\r\n\r\n      const transform = `translateY(${\r\n        -(expDiv.offsetHeight + 10) + \"px\"\r\n      }) scale(0.4)`;\r\n\r\n      try {\r\n        let res = eval(expression);\r\n\r\n        setExpression(res.toString());\r\n        setTimeout(() => {\r\n          cloneNode.style.transform = transform;\r\n          expDiv.innerHTML = \"\";\r\n          addAnimSpan(Math.floor(res * 100000000) / 100000000);\r\n        }, 200);\r\n      } catch {\r\n        setTimeout(() => {\r\n          cloneNode.style.transform = transform;\r\n          expDiv.innerHTML = \"Syntax err\";\r\n        }, 200);\r\n      } finally {\r\n        console.log(\"calc complete\");\r\n      }\r\n    }\r\n  };\r\n\r\n  const addAnimSpan = (content) => {\r\n    const expDiv = expRef.current;\r\n    const span = document.createElement(\"span\");\r\n\r\n    span.innerHTML = content;\r\n    span.style.opacity = \"0\";\r\n    expDiv.appendChild(span);\r\n\r\n    const width = span.offsetWidth + \"px\";\r\n    span.style.width = \"0\";\r\n\r\n    setTimeout(() => {\r\n      span.style.opacity = \"1\";\r\n      span.style.width = width;\r\n    }, 100);\r\n  };\r\n\r\n  return (\r\n    <div className=\"calculator\">\r\n      <div className=\"calculator__result\">\r\n        <div ref={expRef} className=\"calculator__result__exp\"></div>\r\n        <div className=\"calculator__result__exp\"></div>\r\n      </div>\r\n      <div ref={btnsRef} className=\"calculator__btns\">\r\n        {btns.map((item, index) => (\r\n          <button\r\n            key={index}\r\n            className={item.class}\r\n            onClick={() => btnClick(item)}\r\n          >\r\n            {item.display}\r\n          </button>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Calculator;\r\n","import \"./App.css\";\n\nimport Calculator from \"./components/calculator/Calculator\";\n\nfunction App() {\n  return (\n    <div>\n      <Calculator />\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}